<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="src/estilo/style.css">
    <link rel="stylesheet" href="src/estilo/reset.css">

    <title>Jogo de Separar Lixo</title>


</head>

<body>

    <h1 class="titulo-pagina">IFMT </h1>

    <header class="header">

        <a href="/" class="logo">Logo</a>
        <nav>
            <ul class="menu">
                <li><a href="#">Home</a></li>
                <li><a href="#">Sobre</a></li>
                <li><a href="#">Contato</a></li>
            </ul>
        </nav>
        
    </header>

    <section class="jogo">
        <div id="game-container">
            <div id="trash-blue" class="trash-can" ondrop="drop(event)" ondragover="allowDrop(event)">
                <img src="src/image/lixo-azul-vazio-recicla-a-lixeira-de-plastico_311865-10002.avif" alt="Lixeiro Azul">
            </div>
            <div id="trash-orange" class="trash-can" ondrop="drop(event)" ondragover="allowDrop(event)">
                <img src="src/image/png-clipart-waste-container-recycling-bin-icon-delete-button-s-text-orange.png"
                    alt="Lixeiro Laranja">
            </div>

            <div id="trash-items">
                <div class="trash-item" data-type="reciclavel" draggable="true" ondragstart="drag(event)">
                    <img src="recyclable-trash.png" alt="Lixo Reciclável">
                </div>
                <div class="trash-item" data-type="humido" draggable="true" ondragstart="drag(event)">
                    <img src="organic-trash.png" alt="Lixo Orgânico">
                </div>
            </div>
        </div>

        <div id="message">

            <h2>Fim de Jogo!</h2>
            <p>Você colocou o lixo no lixeiro errado.</p>
            <button onclick="resetGame()">Jogar Novamente</button>
        </div>
    </section>

    <script>

        let gameActive = true;

        function allowDrop(event) {
            if (!gameActive) return;
            event.preventDefault();
        }

        function drag(event) {
            if (!gameActive) return;
            event.dataTransfer.setData("text", event.target.dataset.type);
        }

        function drop(event) {
            if (!gameActive) return;
            event.preventDefault();
            var data = event.dataTransfer.getData("text");

            if (event.target.id === 'trash-blue' && data === 'reciclavel') {
                event.target.appendChild(document.querySelector('.hold'));
            } else if (event.target.id === 'trash-orange' && data === 'humido') {
                event.target.appendChild(document.querySelector('.hold'));
            } else {
                endGame();
            }
        }

        function endGame() {
            gameActive = false;
            document.getElementById('message').style.display = 'block';
        }

        function resetGame() {
            gameActive = true;
            document.getElementById('message').style.display = 'none';
            document.querySelectorAll('.trash-item').forEach(item => {
                item.style.display = 'block';
            });
        }
    </script>

</body>

</html>